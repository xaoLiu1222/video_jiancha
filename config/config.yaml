# ============================================================
# 视频审核系统配置文件
# Video Review System Configuration
# ============================================================

# 硅基流动 API 配置 (必须)
# 获取 API Key: https://siliconflow.cn
siliconflow:
  # API 密钥 (从硅基流动控制台获取)
  # 也可通过环境变量 SILICONFLOW_API_KEY 设置 (优先级更高)
  api_key: ""

  # 使用的模型名称
  # 推荐: Qwen/Qwen3-VL-72B-Instruct (准确率优先)
  # 备选: Qwen/Qwen3-VL-32B-Thinking (速度与准确率平衡)
  model: "Qwen/Qwen3-VL-72B-Instruct"

  # API 基础地址 (通常无需修改)
  api_base: "https://api.siliconflow.cn/v1"

  # API 超时时间 (秒)
  timeout: 180

# 视频目录配置
paths:
  # 待审核视频目录 (支持绝对路径, 如 U 盘: /media/usb/videos)
  video_dir: "./data/to_review"

  # 审核通过视频存放目录
  approved_dir: "./data/approved"

  # 审核拒绝视频存放目录
  rejected_dir: "./data/rejected"

  # 需人工复核视频存放目录
  manual_review_dir: "./data/manual_review"

  # 审核结果保存路径
  results_path: "./data/results/review_results.json"

# 视频处理配置
video:
  # 每个视频采样帧数 (越多越准确, 但消耗更多 token)
  # 建议: 10-12 帧可获得较好的精准度
  num_frames: 12

  # 支持的视频格式
  formats:
    - ".mp4"
    - ".avi"
    - ".mov"
    - ".ts"
    - ".mkv"
    - ".flv"

  # 最小视频时长 (秒), 低于此时长自动拒绝
  min_duration: 120  # 2 分钟

  # 是否启用智能关键帧提取 (基于场景变化检测)
  # true: 智能提取场景变化点的帧 (推荐, 更准确)
  # false: 均匀采样 (更快, 但可能漏掉关键内容)
  smart_extraction: true

  # 智能提取时的最小帧间隔 (帧数)
  # 避免提取过于相近的帧
  min_frame_interval: 30

  # 场景变化检测阈值 (0-100, 越小越敏感)
  scene_threshold: 30.0

# 图片压缩配置 (影响识别精度和 token 消耗)
image:
  # 图片最大边长 (像素)
  # 建议: 768-1024 可获得更好的识别精度
  # 原值 512 可能导致细节丢失
  max_size: 768

  # JPEG 压缩质量 (1-100)
  # 建议: 85 以上可保留更多细节
  quality: 85

# 审核规则配置
review_rules:
  # 是否启用格式检查
  format_check_enabled: true

  # 是否拒绝竖屏视频
  reject_vertical: true

  # 黑边检测阈值 (像素亮度, 0-255)
  black_border_threshold: 20

# 审核策略配置 (新增)
review:
  # 是否启用二次审核 (对低置信度结果进行复核)
  # true: 低置信度结果会进行二次审核 (更准确, 但消耗更多 token)
  # false: 只进行一次审核
  enable_double_check: true

  # 置信度阈值 (0-1)
  # 低于此阈值的结果会触发二次审核
  confidence_threshold: 0.8

  # 审核严格程度
  # strict: 宁严勿松, 有疑虑就拒绝
  # balanced: 平衡模式
  # lenient: 宽松模式, 只拒绝明确违规
  strictness: "strict"

# 模型参数配置
model_params:
  # 最大输出 token 数
  # 建议: 增加到 1024 以获得更详细的审核说明
  max_tokens: 1024

  # 温度参数 (0-1, 越低越稳定)
  # 建议: 0.1-0.3 可获得更稳定的审核结果
  temperature: 0.2
